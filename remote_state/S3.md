Terraform S3 Remote Backend Guide

This guide explains how to bootstrap a Terraform remote backend using an S3 bucket and DynamoDB table, enabling safe team collaboration and state locking.


Step 1: Create Backend Infrastructure (Run Once)

The backend project is responsible for creating the S3 bucket and DynamoDB table for Terraform remote state.

1.1 Navigate to backend project
```bash
cd terraform-backend
```

1.2 Initialize Terraform (local state)
At this stage, Terraform uses local state because the remote backend does not exist yet.
```bash
terraform init
```

1.3 Review and apply
```bash
terraform plan
terraform apply
```
Type yes when prompted.

After this step:
S3 bucket for Terraform state is created
DynamoDB table for state locking is created

Note: This step should be executed only once per AWS account. Do not delete or modify these resources, as all Terraform projects will depend on them.


Step 2: Configure Remote Backend in Other Terraform Projects

Once the backend infrastructure exists, it can be used by any other Terraform project.

In your actual infrastructure project, create a file called backend.tf:

```bash
terraform {
  backend "s3" {
    bucket         = "<ACCOUNT_ID>-terraform-states"
    key            = "dev/service-name/terraform.tfstate"
    region         = "ap-south-1"
    dynamodb_table = "terraform-lock"
    encrypt        = true
  }
}
```
Notes:

bucket → S3 bucket created in Step 1
dynamodb_table → DynamoDB table created in Step 1
key → Unique path per project/environment
Never reuse the same key across environments


Step 3: Initialize Terraform with Remote Backend

Navigate to your infrastructure project:
```bash
cd terraform-infra
```

Initialize Terraform with the remote backend:
```bash
terraform init
```

During this step, Terraform:
```text
Connects to the S3 backend
Enables DynamoDB state locking
Migrates state if required
```

3.1 Apply Your Infrastructure
```bash
terraform plan
terraform apply
```

## Terraform state is now:

- Stored in S3
- Locked using DynamoDB
- Safe for team collaboration

## Why Terraform Init Is Run Multiple Times

Terraform is initialized in two different projects:

- **Backend project**: Create S3 + DynamoDB (uses local state)
- **Infra project**: Create AWS resources (uses S3 + DynamoDB backend)

Terraform cannot store state in a backend that does not exist, which is why the backend must be bootstrapped first.

✅ Remote backend setup is now complete — your Terraform state is safely stored in S3 with DynamoDB locking, ready for team collaboration across environments.







