Step 1: Create Backend Infrastructure (Run Once)

This step creates the S3 bucket and DynamoDB table.

1.1 Navigate to backend project
```bash
cd terraform-backend
```

1.2 Initialize Terraform (local state)
```bash
terraform init
```


At this stage, Terraform uses local state because the remote backend does not exist yet.

1.3 Review and apply
```bash
terraform plan
terraform apply
```

After this step:

S3 bucket for Terraform state is created

DynamoDB table for state locking is created

✅ This step is executed only once per AWS account.

Step 2: Configure Remote Backend in Other Terraform Projects

Once the backend infrastructure exists, it can be used by any other Terraform project.

In your actual infrastructure project, create a file called backend.tf:

```bash
terraform {
  backend "s3" {
    bucket         = "<ACCOUNT_ID>-terraform-states"
    key            = "dev/service-name/terraform.tfstate"
    region         = "ap-south-1"
    dynamodb_table = "terraform-lock"
    encrypt        = true
  }
}
```
Notes:

bucket → S3 bucket created in Step 1

dynamodb_table → DynamoDB table created in Step 1

key → Unique path per project/environment

Never reuse the same key across environments

Step 3: Initialize Terraform with Remote Backend

Navigate to your infrastructure project:
```bash
cd terraform-infra


Initialize Terraform:

terraform init
```

During this step, Terraform:

Connects to the S3 backend

Enables DynamoDB state locking

Migrates state if required

Now run:
```bash
terraform plan
terraform apply
```

✅ Terraform state is now:

Stored in S3

Locked using DynamoDB

Safe for team collaboration

Why Terraform Init Is Run Multiple Times

Terraform is initialized in two different projects:

Project	Purpose	Backend
Backend project	Create S3 + DynamoDB	Local
Infra project	Create AWS resources	S3 + DynamoDB

Terraform cannot store state in a backend that does not exist, which is why the backend must be bootstrapped first.

Best Practices

Use a dedicated backend project

Never delete or modify Terraform state manually

Enable S3 versioning (already enabled)

Use IAM roles instead of access keys

Separate state per environment (dev, stage, prod)

Common Mistakes to Avoid

❌ Creating backend and using it in the same Terraform project
❌ Sharing one state file across multiple environments
❌ Storing secrets in Terraform state
❌ Disabling DynamoDB locking

One-Line Interview Explanation

“We bootstrap Terraform backend infrastructure using local state, then configure all infrastructure projects to use an S3 remote backend with DynamoDB state locking for safe collaboration.”

